@model FoodDeliveryWebAppFinal.Models.SearchViewModel

@if (TempData["Notification"] != null)
{
    <div class="alert alert-warning">
        @TempData["Notification"]
    </div>
}

<div class="container py-5" style="min-height: 100vh;">
    <div class="row">
        <div class="col-md-9">
            <div class="mb-4">
                <form method="get" asp-action="Search">
                    <input type="text" name="query" value="@Model.Query" class="form-control" style="
                        border-radius: 20px;
                        border: 1px solid #ff9800;
                        padding: 10px 20px;
                        font-size: 1rem;
                        background-color: papayawhip;
                    " placeholder="Search for restaurants or menu items...">
                </form>
            </div>

            <h4 style="color: #ff9800; font-weight: 600;">Search Results for "@Model.Query"</h4>
            
            @if (!Model.Restaurants.Any() && !Model.MenuItems.Any())
            {
                <p>No results found.</p>
            }
            else
            {
                <!-- Display matching Restaurants -->
                @if (Model.Restaurants.Any())
                {
                    <h5 style="color: #ff9800; font-weight: 600;">Restaurants</h5>
                    <div class="row">
                        @foreach (var restaurant in Model.Restaurants)
                        {
                            <div class="col-md-4 mb-4">
                                <div class="card shadow-sm" style="border-radius: 15px; overflow: hidden; border: none;">
                                    <img src="@restaurant.PhotoUrl" class="card-img-top" alt="@restaurant.Name" style="height: 200px; object-fit: cover;">
                                    <div class="card-body text-center" style="background-color: papayawhip;">
                                        <h5 class="card-title" style="font-weight: 600; color: #ff9800;">@restaurant.Name</h5>
                                        <p class="card-text" style="color: #333;">@restaurant.Description</p>
                                        <a asp-action="MenuItemsByRestaurant" asp-route-id="@restaurant.RestaurantID" class="btn btn-warning" style="
                                            background-color: #ff9800;
                                            border-color: #ff9800;
                                            color: white;
                                            font-weight: 500;
                                        ">View Menu</a>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                }

                <!-- Display matching Menu Items -->
                @if (Model.MenuItems.Any())
                {
                    <h5 style="color: #ff9800; font-weight: 600;">Menu Items</h5>
                    <div class="row">
                        @foreach (var menuItem in Model.MenuItems)
                        {
                            <div class="col-md-4 mb-4">
                                <div class="card shadow-sm" style="border-radius: 15px; overflow: hidden; border: none;">
                                    @* If menu items have an image property, display it; adjust as needed *@
                                    @if (!string.IsNullOrEmpty(menuItem.PhotoUrl))
                                    {
                                        <img src="@menuItem.PhotoUrl" class="card-img-top" alt="@menuItem.Name" style="height: 200px; object-fit: cover;">
                                    }
                                    <div class="card-body text-center" style="background-color: papayawhip;">
                                        <h5 class="card-title" style="font-weight: 600; color: #ff9800;">@menuItem.Name</h5>
                                        <p class="card-text" style="color: #333;">@menuItem.Description</p>
                                        <p class="card-text" style="color: #ff9800; font-weight: 600;">@menuItem.Price.ToString("C")</p>
                                        <a asp-action="MenuItemDetails" asp-route-id="@menuItem.MenuItemID" class="btn btn-warning" style="
                                            background-color: #ff9800;
                                            border-color: #ff9800;
                                            color: white;
                                            font-weight: 500;
                                        ">View Details</a>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                }
            }
        </div>
    </div>
</div>
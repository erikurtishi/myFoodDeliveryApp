@model IEnumerable<FoodDeliveryWebAppFinal.Models.Order>

@{
ViewData["Title"] = "Delivery Dashboard";
}

<h2>Delivery Dashboard</h2>

@if (!Model.Any())
{
<p>No orders assigned to you at the moment.</p>
}
else
{
<table class="table table-striped">
    <thead>
    <tr>
        <th>Order ID</th>
        <th>Status</th>
        <th>Total Amount</th>
        <th>Customer Email</th>
        <th>Created At</th>
        <th>Order Items</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var order in Model)
    {
    <tr>
        <td>@order.OrderID</td>
        <td>@order.Status</td>
        <td>@order.TotalAmount.ToString("C")</td>
        <td>@order.User.Email</td>
        <td>@order.CreatedAt.ToString("g")</td>
        <td>
            @if (order.OrderItems != null && order.OrderItems.Any())
            {
            <ul>
                @foreach (var item in order.OrderItems)
                {
                <li>@item.MenuItem.Name x @item.Quantity - @item.SubTotal.ToString("C")</li>
                }
            </ul>
            }
            else
            {
            <span>No items</span>
            }
        </td>
    </tr>
    }
    </tbody>
</table>
}
